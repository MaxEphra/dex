<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DEX - IMCASH</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>DEX - IMCASH</h1>
    <div class="input-group">
      <label for="buyAmount">Comprar com USDT:</label>
      <input type="number" id="buyAmount">
      <button onclick="comprarTokens()">Comprar</button>
    </div>
    <div class="input-group">
      <label for="sellAmount">Vender IMCASH:</label>
      <input type="number" id="sellAmount">
      <button onclick="venderTokens()">Vender</button>
    </div>
    <div class="status">
      <p>Preço do IMCASH: <span id="preco">0</span> USDT</p>
      <p>Liquidez (USDT): <span id="liquidez">0</span></p>
      <p>Tokens em Liquidez (IMCASH): <span id="liquidezTokens">0</span></p>
      <p>Carteira do Usuário: <span id="carteira">1000000</span> USDT</p>
      <p>Tokens do Usuário: <span id="tokensUser">0</span> IMCASH</p>
      <p>Fundo Social: <span id="fundoSocial">0</span> USDT</p>
      <p>Fundo Projeto: <span id="fundoProjeto">0</span> USDT</p>
      <p>Distribuído para Holders: <span id="distribuidoHolders">0</span> USDT</p>
    </div>
  </div>  <script>
    let poolUSDT = 500;
    let poolIMCASH = 500;
    let carteiraUser = 1000000;
    let tokensUser = 0;
    let fundoSocial = 0;
    let fundoProjeto = 0;
    let distribuidoHolders = 0;

    function atualizarInterface() {
      document.getElementById("preco").textContent = (poolUSDT / poolIMCASH).toFixed(6);
      document.getElementById("liquidez").textContent = poolUSDT.toFixed(2);
      document.getElementById("liquidezTokens").textContent = poolIMCASH.toFixed(2);
      document.getElementById("carteira").textContent = carteiraUser.toFixed(2);
      document.getElementById("tokensUser").textContent = tokensUser.toFixed(6);
      document.getElementById("fundoSocial").textContent = fundoSocial.toFixed(2);
      document.getElementById("fundoProjeto").textContent = fundoProjeto.toFixed(2);
      document.getElementById("distribuidoHolders").textContent = distribuidoHolders.toFixed(2);
    }

    function comprarTokens() {
      let valor = parseFloat(document.getElementById("buyAmount").value);
      if (isNaN(valor) || valor <= 0 || valor > carteiraUser) {
        alert("Valor inválido ou saldo insuficiente.");
        return;
      }

      let limite = poolUSDT * 0.15;
      if (valor > limite) valor = limite;

      let taxa = valor * 0.02;
      let valorLiquido = valor - taxa;

      let precoAtual = poolUSDT / poolIMCASH;
      let tokensRecebidos = valorLiquido / precoAtual;

      carteiraUser -= valor;
      tokensUser += tokensRecebidos;
      poolUSDT += valor * 0.015; // Apenas a parte da taxa vai para liquidez
      fundoProjeto += valor * 0.0005;
      fundoSocial += valor * 0.0005;
      distribuidoHolders += valor * 0.002;
      poolIMCASH -= tokensRecebidos;

      atualizarInterface();
    }

    function venderTokens() {
      let valorToken = parseFloat(document.getElementById("sellAmount").value);
      if (isNaN(valorToken) || valorToken <= 0 || valorToken > tokensUser) {
        alert("Valor inválido ou tokens insuficientes.");
        return;
      }

      let precoAtual = poolUSDT / poolIMCASH;
      let valorBruto = valorToken * precoAtual;
      let taxa = valorBruto * 0.02;
      let valorLiquido = valorBruto - taxa;

      let limite = poolUSDT * 0.15;
      if (valorLiquido > limite) valorLiquido = limite;

      tokensUser -= valorToken;
      carteiraUser += valorLiquido;
      poolUSDT -= valorLiquido;
      poolUSDT += valorBruto * 0.015; // Apenas a parte da taxa vai para liquidez
      fundoProjeto += valorBruto * 0.0005;
      fundoSocial += valorBruto * 0.0005;
      distribuidoHolders += valorBruto * 0.002;
      poolIMCASH += valorToken;

      atualizarInterface();
    }

    atualizarInterface();
  </script></body>
</html>